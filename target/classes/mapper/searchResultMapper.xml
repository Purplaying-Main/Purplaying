<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd ">

<mapper namespace="kr.co.purplaying.dao.searchResultMapper">
	
	
	
	<sql id="selectFromBoard">
		SELECT prdt_id, writer, prdt_name, prdt_desc, prdt_desc_detail, prdt_regdate, prdt_opendate, prdt_enddate, prdt_goal, prdt_currenttotal, prdt_open, prdt_desc_policy, prdt_genre, prdt_thumbnail
		, (prdt_enddate-prdt_opendate) as "prdt_dday"
		, (prdt_enddate+1) as "prdt_purchaseday"
		, (prdt_enddate-3) as "prdt_limitday"
		, (prdt_currenttotal/prdt_goal)*100 as "prdt_percent"
		FROM tb_product
	</sql>
	
	
 	<sql id="criteria">
 		<choose>
		    <when test="keyword != null">
				where (prdt_name like concat ('%', #{keyword}, '%'))
		    </when>
		</choose>
	</sql>
	
<!-- 	<select id="getGoodsList" resultType="SearchResultDto">	
		SELECT prdt_id, writer, prdt_name, prdt_desc, prdt_desc_detail, prdt_regdate, prdt_opendate, prdt_enddate, prdt_goal, prdt_currenttotal, prdt_open, prdt_desc_policy, prdt_genre, prdt_thumbnail
		, (prdt_enddate-prdt_opendate) as "prdt_dday"
		, (prdt_enddate+1) as "prdt_purchaseday"
		, (prdt_enddate-3) as "prdt_limitday"
		, (prdt_currenttotal/prdt_goal)*100 as "prdt_percent"
		FROM tb_product
		<include refid="criteria"></include>
		where prdt_id = #{prdt_id}
		limit #{skip}, #{amount}	
	
	</select> -->
	
	
	
	<select id="getGoodsList" resultType="int">

  		select count(*) from tb_product
  		
		<include refid="criteria"></include>
		
	</select>

	
	
	

	

	

</mapper>